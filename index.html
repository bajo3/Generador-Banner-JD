<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Generador de Banners - Jesús Díaz Automotores</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <link rel="stylesheet" href="./css/styles.css" />
</head>
<body>
  <div class="app">
    <h1>Generador de Banners <span>Jesús Díaz Automotores</span></h1>

    <div class="card">
      <div class="card-title">Tipo de banner</div>
      <div class="tabs" id="templateTabs" role="tablist" aria-label="Plantillas">
        <button class="tab is-active" data-template="portada" type="button" role="tab">Portada / Ficha</button>
        <button class="tab" data-template="venta" type="button" role="tab">Venta</button>
        <button class="tab" data-template="vendido" type="button" role="tab">Vendido</button>
        <button class="tab" data-template="historia" type="button" role="tab">Historia (9:16)</button>
        <button class="tab" data-template="felicitaciones" type="button" role="tab">Felicitaciones</button>
      </div>

      <div class="form-grid" style="margin-top: 12px;">
        <label>
          Plantillas a exportar
          <div class="checkbox-grid">
            <label class="chk"><input id="exp_portada" type="checkbox" checked /> Portada</label>
            <label class="chk"><input id="exp_venta" type="checkbox" checked /> Venta</label>
            <label class="chk"><input id="exp_vendido" type="checkbox" checked /> Vendido</label>
            <label class="chk"><input id="exp_historia" type="checkbox" checked /> Historia</label>
            <label class="chk"><input id="exp_felicitaciones" type="checkbox" checked /> Felicitaciones</label>
          </div>
        </label>

        <label>
          Formato
          <select id="exportFormat">
            <option value="jpg" selected>JPG</option>
            <option value="png">PNG</option>
          </select>
        </label>

        <label class="only-jpg">
          Calidad JPG
          <input id="jpgQuality" type="range" min="0.80" max="0.95" step="0.01" value="0.92" />
        </label>

        <label>
          Guías
          <div class="inline-row">
            <label class="chk"><input id="showGuides" type="checkbox" /> Mostrar regla de tercios</label>
          </div>
        </label>

        <label class="only-felicitaciones is-hidden">
          Nombre cliente
          <input id="clientName" type="text" placeholder="LUCIANO CHAPARRO" />
        </label>

        <label class="only-vendido is-hidden">
          Texto diagonal
          <input id="soldText" type="text" placeholder="VENDIDO" value="VENDIDO" />
        </label>
      </div>
      <p class="hint">
        Elegí una plantilla para previsualizar. El botón <strong>Generar</strong> crea previews y luego exporta en lote lo que tengas tildado.
      </p>
    </div>

    <div class="card">
      <div class="card-title">Datos del vehículo</div>
      <div class="form-grid">
        <label class="only-portada">
          Marca
          <input id="brand" type="text" placeholder="Renault" />
        </label>

        <label>
          Modelo
          <input id="model" type="text" placeholder="Oroch" />
        </label>

        <label>
          Año
          <input id="year" type="number" placeholder="2019" />
        </label>

        <label>
          Versión
          <input id="version" type="text" placeholder="Outsider 1.6" />
        </label>

        <label class="only-venta only-vendido is-hidden">
          Motor
          <input id="engine" type="text" placeholder="1.6" />
        </label>

        <label class="only-gearbox is-hidden">
          Caja
          <input id="gearbox" type="text" placeholder="Manual" />
        </label>

        <label class="only-historia is-hidden">
          Motor / Tracción
          <input id="motorTraction" type="text" placeholder="1.6 / 4x2" />
        </label>

        <label>
          Kilometraje
          <div class="km-row">
            <input id="km" type="number" placeholder="170000" />
            <div class="km-check">
              <input id="kmHidden" type="checkbox" />
              <span>Sin kilómetros</span>
            </div>
          </div>
        </label>

        <label class="only-portada">
          Extra 1
          <input id="extra1" type="text" placeholder="Entrega inmediata" />
        </label>

        <label class="only-portada">
          Extra 2
          <input id="extra2" type="text" placeholder="Financiación" />
        </label>
      </div>

      <p class="hint only-portada">
        En Portada/Ficha, todo se dibuja sobre la foto. El recorte es tipo “cover” (sin deformar).
      </p>

      <p class="hint only-venta only-vendido is-hidden">
        En Venta/Vendido, la línea inferior se arma como: <strong>MODELO/AÑO/VERSIÓN/MOTOR/KM</strong>.
      </p>
    </div>

    <div class="card">
      <div class="card-title">Fotos del vehículo</div>
      <div class="file-input-wrapper">
        <label>
          <span>Seleccionar imágenes</span>
          <input id="images" type="file" accept="image/*" multiple />
        </label>
        <p class="hint">Podés seleccionar varias a la vez.</p>
      </div>

      <div class="actions">
        <button id="generateBtn" class="btn-primary">
          <span>⚙️ Generar</span>
        </button>
        <div class="status" id="statusText">
          Listo para generar. Subí las fotos y completá los datos.
        </div>
      </div>

      <div class="progress-wrap" aria-hidden="false">
        <div class="progress">
          <div id="progressBar" class="progress-bar" style="width: 0%"></div>
        </div>
        <div id="progressMeta" class="progress-meta"></div>
      </div>
    </div>

    <div class="card">
      <div class="card-title">
        <span class="badge"><span class="badge-dot"></span> Banners generados</span>
      </div>
      <div id="previews" class="previews"></div>
      <div class="actions" style="margin-top: 14px;">
        <button id="downloadZipBtn" class="btn-secondary" disabled>
          ⬇️ Descargar ZIP
        </button>
        <div class="hint">Después de generar, podés <strong>arrastrar la preview</strong> para reencuadrar y ajustar el <strong>zoom</strong>. En <strong>Historia</strong>, hacé click en un bloque de foto (1/2/4) para editar ese recorte.</div>
      </div>
    </div>

    <div class="footer-note">
      Todo el procesamiento se hace en tu navegador. Nada se sube a ningún servidor.
    </div>
  </div>

  <script type="module" src="./js/app.js"></script>
</body>
</html>
